(this["webpackJsonpmovie-library"]=this["webpackJsonpmovie-library"]||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},102:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(12),i=n.n(s),r=(n(54),n(55),n(13)),o=n(2),l=n(3),u=(n(56),n.p+"static/media/bg2.cd8a79a6.jpg"),d=n(110),j=n(109),b=(n(57),n(41)),h=n.n(b),v=n(9),p=n(19),g=Object(p.b)({name:"appData",initialState:{playlists:[],modalIsOpen:!1,user:null},reducers:{saveUser:function(e,t){e.user=t.payload},savePlaylists:function(e,t){e.playlists=t.payload},saveMovie:function(e,t){var n,c=null===(n=e.playlists)||void 0===n?void 0:n.findIndex((function(e){return(null===e||void 0===e?void 0:e._id)===t.payload.id}));e.playlists[c].movies.push(t.payload.movie)}}}),O=g.actions,m=O.saveUser,f=O.savePlaylists,x=(O.addPlaylist,O.saveMovie),y=function(e){return e.appData.user},_=function(e){return e.appData.playlists},N=g.reducer,S=n(10),k=n.n(S),C=function(e){return{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*",authorization:"Bearer ".concat(e)}}},w=function(e,t){return k.a.get("playlists/".concat(t),C(e)).then((function(e){return e.data})).catch((function(e){return e}))},I=n(1);var P=function(e){var t=e.props,n=Object(c.useState)(!1),a=Object(l.a)(n,2),s=a[0],i=a[1],r=Object(v.b)(),o=Object(v.c)(y),u=Object(v.c)(_),d=Object(c.useState)(),b=Object(l.a)(d,2),p=b[0],g=b[1],O=Object(c.useState)(!1),m=Object(l.a)(O,2),N=m[0],S=m[1],P={backgroundImage:"linear-gradient(to bottom, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.95)), url(".concat(t.Poster,")"),backgroundSize:"cover",height:"100%"},T=function(e,n){e.preventDefault();var c={Title:t.Title,Year:t.Year,Poster:t.Poster};(function(e,t,n){return k.a.put("playlists/".concat(t),n,C(e)).then((function(e){return e})).catch((function(e){return e}))})(o.accessToken,n,JSON.stringify(c)).then((function(e){200===e.status?(alert("Movie added successfully"),r(x({id:n,movieData:c}))):console.log(e)})).catch((function(e){console.log(e)}))};return Object(I.jsxs)("div",{className:"card",style:P,children:[Object(I.jsx)(j.a,{className:"add__icon",onClick:function(e){return(null===o||void 0===o?void 0:o.user)?i(!0):alert("Login to add movie to playlist")}}),Object(I.jsxs)("p",{children:[" ",t.Title," [ ",t.Year," ] "]}),Object(I.jsx)(h.a,{className:"modal",isOpen:s,onRequestClose:function(){return i(!1)},children:Object(I.jsxs)("div",{className:"modal__content",children:[Object(I.jsx)("h2",{children:"Add movie to playlist"}),(null===u||void 0===u?void 0:u.length)>0?Object(I.jsx)("div",{className:"playlist__list",children:null===u||void 0===u?void 0:u.map((function(e){return Object(I.jsxs)("div",{className:"playlist",children:[Object(I.jsx)("div",{className:"playlist__name",children:null===e||void 0===e?void 0:e.name}),Object(I.jsx)("button",{className:"add__button",onClick:function(t){T(t,e._id)},children:"Add"})]})}))}):Object(I.jsx)(I.Fragment,{}),Object(I.jsx)("h4",{children:"Create Playlist and add movie to it. "}),Object(I.jsx)("h6",{children:"(Check the checkbox to create private playlist)"}),Object(I.jsxs)("div",{className:"playlist",children:[Object(I.jsx)("input",{className:"private__checkbox",type:"checkbox",value:N,onChange:function(e){return S(e.target.value)}}),Object(I.jsx)("input",{placeholder:"Create New Playlist",value:p,onChange:function(e){return g(e.target.value)}}),Object(I.jsx)("button",{className:"add__button",onClick:function(e){e.preventDefault();var t={userId:o.user._id,name:p,movies:[],isPrivate:!!N};(function(e,t){return k.a.post("playlists/create",t,C(e)).then((function(e){return e.data})).catch((function(e){return e}))})(o.accessToken,JSON.stringify(t)).then((function(t){var n=t._id;w(o.accessToken,o.user._id).then((function(t){r(f(t)),T(e,n)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},children:"Create & Add"})]}),Object(I.jsx)("button",{className:"close__button",onClick:function(e){return i(!1)},children:"Close "})]})})]})};n(94),n(95);var T=function(e){var t=e.props,n={backgroundImage:"linear-gradient(to bottom, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.95)), url(".concat(null===t||void 0===t?void 0:t.Poster,")"),backgroundSize:"cover",height:"100%"};return Object(I.jsx)("div",{className:"card",style:n,children:Object(I.jsxs)("p",{children:[" ",null===t||void 0===t?void 0:t.Title," [ ",null===t||void 0===t?void 0:t.Year," ] "]})})};var D=function(e){var t,n=e.props;return Object(I.jsxs)("div",{className:"playlist",children:[Object(I.jsxs)("h4",{children:[n.name," playlist"]}),Object(I.jsx)("div",{className:"playlist__content",children:null===(t=n.movies)||void 0===t?void 0:t.map((function(e){return Object(I.jsx)(T,{props:e})}))})]})};var F=function(){var e,t,n=Object(c.useState)(""),a=Object(l.a)(n,2),s=a[0],i=a[1],r=Object(c.useState)([]),j=Object(l.a)(r,2),b=j[0],h=j[1],p=Object(c.useRef)(null),g=Object(o.f)(),O=Object(v.b)(),x=Object(v.c)(y),N=Object(v.c)(_);Object(c.useEffect)((function(){try{var e=JSON.parse(localStorage.getItem("user"));O(m(e)),w(e.accessToken,e.user._id).then((function(e){O(f(e))})).catch((function(e){console.log(e)}))}catch(t){console.log(t)}}),[]);var S=function(e){var t;e.preventDefault(),(t=s,k.a.get("http://www.omdbapi.com/",{params:{s:t,type:"movie",apikey:"6077d8b1"}}).then((function(e){return e.data.Search})).catch((function(e){console.log(e)}))).then((function(e){var t;h(e),null===p||void 0===p||null===(t=p.current)||void 0===t||t.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})})).catch((function(e){alert(e)}))},T={backgroundImage:"linear-gradient(to bottom, rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url(".concat(u,")"),backgroundSize:"cover",height:"100vh"};return Object(I.jsxs)("div",{className:"home",style:T,children:[(null===x||void 0===x||null===(e=x.user)||void 0===e?void 0:e.email)?Object(I.jsx)("div",{className:"home__register",children:Object(I.jsx)("span",{className:"register__button",onClick:function(e){var t,n;e.preventDefault(),(t=x.accessToken,n=x.user.email,k.a.post("users/logout",{body:{email:n}},C(t)).then((function(e){return e.status})).catch((function(e){return e}))).then((function(e){O(m(null)),localStorage.setItem("user",null),alert("User logged out successfully")})).catch((function(e){alert("Something went wrong"),console.log(e)}))},children:" Logout"})}):Object(I.jsxs)("div",{className:"home__register",children:[Object(I.jsx)("span",{className:"register__button",onClick:function(e){g.push("/login")},children:"Sign In "}),Object(I.jsx)("span",{children:" | "}),Object(I.jsx)("span",{className:"register__button",onClick:function(e){g.push("/register")},children:" Sign Up"})]}),Object(I.jsxs)("div",{className:"home__main__content",children:[Object(I.jsx)("h1",{children:"Movie Library"}),Object(I.jsx)("p",{children:"Explore all kinds of movies and make your own playlist just by logging in"}),Object(I.jsxs)("form",{className:"home__movie__search",onSubmit:S,children:[Object(I.jsx)(d.a,{className:"search__icon",onClick:S}),Object(I.jsx)("input",{className:"search__input",type:"text",placeholder:"Search Movie",value:s,onChange:function(e){return i(e.target.value)}})]})]}),(null===N||void 0===N?void 0:N.length)>0?Object(I.jsxs)("h2",{className:"user__playlist",children:[" ",null===x||void 0===x||null===(t=x.user)||void 0===t?void 0:t.email,"'s playlists : "]}):Object(I.jsx)(I.Fragment,{}),null===N||void 0===N?void 0:N.map((function(e,t){return Object(I.jsx)(D,{props:e},t)})),(null===b||void 0===b?void 0:b.length)>0?Object(I.jsxs)("div",{className:"search__results",ref:p,children:[Object(I.jsxs)("h2",{children:['Search Results for "',s,'" : ']}),Object(I.jsx)("div",{className:"search__results__container",children:null===b||void 0===b?void 0:b.map((function(e,t){return Object(I.jsx)(P,{props:e},t)}))})]}):Object(I.jsx)(I.Fragment,{})]})},U=(n(100),n.p+"static/media/bg1.9dba380c.jpg");var L=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),i=Object(l.a)(s,2),r=i[0],u=i[1],d=Object(o.f)(),j={backgroundImage:"linear-gradient(to bottom, rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url(".concat(U,")"),backgroundSize:"cover",height:"100vh"};return Object(I.jsx)("div",{className:"login",style:j,children:Object(I.jsxs)("form",{className:"form",onSubmit:function(e){var t;e.preventDefault(),(t={email:n,password:r},k.a.post("users/register",t).then((function(e){return e.data})).catch((function(e){return e}))).then((function(e){alert("User Registered Successfully"),d.push("/login")})).catch((function(e){alert("User Failed to register"),console.log(e)}))},children:[Object(I.jsx)("h1",{children:"Movie Library"}),Object(I.jsxs)("div",{className:"email",children:[Object(I.jsx)("label",{children:"Email Id: "}),Object(I.jsx)("input",{type:"email",value:n,onChange:function(e){return a(e.target.value)}})]}),Object(I.jsxs)("div",{className:"password",children:[Object(I.jsx)("label",{children:"Password : "}),Object(I.jsx)("input",{type:"password",value:r,onChange:function(e){return u(e.target.value)}})]}),Object(I.jsx)("button",{children:"Register "})]})})};n(101);var M=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),i=Object(l.a)(s,2),r=i[0],u=i[1],d=Object(o.f)(),j=Object(v.b)(),b={backgroundImage:"linear-gradient(to bottom, rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url(".concat(U,")"),backgroundSize:"cover",height:"100vh"};return Object(I.jsx)("div",{className:"login",style:b,children:Object(I.jsxs)("form",{className:"form",onSubmit:function(e){var t;e.preventDefault(),(t={email:n,password:r},k.a.post("users/login",t).then((function(e){return e.data})).catch((function(e){return e}))).then((function(e){localStorage.setItem("user",JSON.stringify(e)),j(m(e)),alert("User Logged in Successfully"),d.push("/")})).catch((function(e){alert("User Failed to login"),console.log(e)}))},children:[Object(I.jsx)("h1",{children:"Movie Library"}),Object(I.jsxs)("div",{className:"email",children:[Object(I.jsx)("label",{children:"Email Id: "}),Object(I.jsx)("input",{type:"email",value:n,onChange:function(e){return a(e.target.value)}})]}),Object(I.jsxs)("div",{className:"password",children:[Object(I.jsx)("label",{children:"Password : "}),Object(I.jsx)("input",{type:"password",value:r,onChange:function(e){return u(e.target.value)}})]}),Object(I.jsx)("button",{children:"Sign in "})]})})};var z=function(){return Object(I.jsx)("div",{className:"App",children:Object(I.jsx)(r.a,{children:Object(I.jsxs)(o.c,{children:[Object(I.jsx)(o.a,{exact:!0,path:"/",children:Object(I.jsx)(F,{})}),Object(I.jsx)(o.a,{exact:!0,path:"/login",children:Object(I.jsx)(M,{})}),Object(I.jsx)(o.a,{exact:!0,path:"/register",children:Object(I.jsx)(L,{})})]})})})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,111)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),s(e),i(e)}))},J=Object(p.a)({reducer:{appData:N}});i.a.render(Object(I.jsx)(a.a.StrictMode,{children:Object(I.jsx)(v.a,{store:J,children:Object(I.jsx)(z,{})})}),document.getElementById("root")),A()},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){}},[[102,1,2]]]);
//# sourceMappingURL=main.c1945325.chunk.js.map